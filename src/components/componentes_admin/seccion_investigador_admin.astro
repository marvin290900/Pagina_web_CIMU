<section>
  <head>
    <title>Panel de Administración - Investigadores</title>
  </head>
  <body class="bg-gray-100 min-h-screen p-6">
    <div class="max-w-xl mx-auto bg-white p-6 rounded-2xl shadow-xl">
      <h1 class="text-2xl font-bold mb-4 text-blue-900">Agregar Investigador</h1>

      <form id="formInvestigador" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Nombre</label>
          <input type="text" name="nombre" required class="mt-1 block w-full rounded-lg border border-gray-300 p-2" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Correo</label>
          <input type="email" name="correo" required class="mt-1 block w-full rounded-lg border border-gray-300 p-2" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Categoría</label>
          <select name="categoria" required class="mt-1 block w-full rounded-lg border border-gray-300 p-2">
            <option value="directivo">Directivo</option>
            <option value="pasante">Pasante</option>
            <option value="sin_informacion">Sin información</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Descripción</label>
          <textarea name="descripcion" class="mt-1 block w-full rounded-lg border border-gray-300 p-2"></textarea>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">URL de Foto</label>
          <input type="text" name="foto" placeholder="https://..." class="mt-1 block w-full rounded-lg border border-gray-300 p-2" />
        </div>

        <button
          type="submit"
          class="w-full bg-blue-700 text-white py-2 px-4 rounded-lg hover:bg-blue-800 transition">
          Guardar Investigador
        </button>

        <p id="resultado" class="text-sm text-green-600 mt-4 hidden"></p>
      </form>
    </div>

    <script type="module">
      const form = document.getElementById('formInvestigador');
      const resultado = document.getElementById('resultado');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const datos = Object.fromEntries(new FormData(form));
        datos.type = 'investigador';

        const response = await fetch('http://localhost:5984/cimu', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(datos),
        });

        if (response.ok) {
          resultado.textContent = '✅ Investigador guardado correctamente.';
          resultado.classList.remove('hidden');
          form.reset();
        } else {
          resultado.textContent = '❌ Error al guardar el investigador.';
          resultado.classList.remove('hidden');
          resultado.classList.add('text-red-600');
        }
      });
    </script>
  </body>
</section>
