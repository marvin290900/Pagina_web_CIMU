---
import portada from "../../assets/remi/remi.png";
import latinrevLogo from "../../assets/remi/latinrev.jpg"; // logo LatinREV
import openAccessLogo from "../../assets/remi/open-access.jpg"; // logo Open Access
import ComponenteArticulos from "./ComponenteArticulos.vue";

let numero = {};
let editorial = {};
let articulosOriginales = [];
let articulosRevision = [];

try {
  const resOriginales = await fetch(
    "http://localhost:4321/api/remi/obtener_revista",
  );
  const data = await resOriginales.json();

  articulosOriginales = data.data.articulosOriginales;
  articulosRevision = data.data.articulosRevision;
  numero = {
    titulo: data.data.titulo,
    descripcion: `REMI es una revista de Acceso Abierto, semestral, gratuita, revisada por pares evaluadores, 
  que acepta de forma continua manuscritos de carÃ¡cter multidisciplinario, 
  sin costo de publicaciÃ³n para los autores.`,
    publicado: data.data.publicado,
    enlacePdf: data.data.urlPDF,
  };

  editorial = {
    titulo: data.data.editorialTitulo,
    autor: data.data.editorialAutor,
    paginas: data.data.editorialPaginas,
    enlace: data.data.editorialPDF,
  };
} catch (error) {
  console.error("Error al obtener los datos:", error);
}
console.log("Articulos Originales:", articulosOriginales);
---

<div class="max-w-4xl mx-auto mt-4 p-4">
  <!-- TÃ­tulo -->
  <h1 class="text-lg font-bold">{numero.titulo}</h1>

  <!-- Portada y descripciÃ³n -->
  <div class="flex flex-col sm:flex-row gap-6 mt-4">
    <!-- Imagen y botÃ³n -->
    <div class="flex flex-col items-center sm:items-start">
      <img
        src={portada.src}
        alt="Portada REMI"
        class="w-64 rounded-lg shadow-lg"
      />
      <a
        href={numero.enlacePdf}
        class="btn btn-primary mt-4"
        target="_blank"
        rel="noopener noreferrer"
      >
        ðŸ“„ NÃºmero Completo
      </a>
    </div>

    <!-- DescripciÃ³n + indexaciones -->
    <div class="flex-1">
      <p class="mb-4">
        REMI es una revista de Acceso Abierto, semestral, gratuita, revisada por
        pares evaluadores, que acepta de forma continua manuscritos de carÃ¡cter
        multidisciplinario, sin costo de publicaciÃ³n para los autores.
      </p>
      <p class="font-semibold mb-4">
        Publicado: <span class="font-normal">{numero.publicado}</span>
      </p>

      <!-- Logos -->
      <div class="flex items-center gap-4">
        <img src={latinrevLogo.src} alt="Indexado en LatÃ­nREV" class="h-10" />
        <img src={openAccessLogo.src} alt="Open Access" class="h-10" />
      </div>
    </div>
  </div>

  <!-- Editorial -->
  <div class="card bg-base-100 shadow-md mt-8">
    <div class="card-body">
      <h2 class="card-title">Editorial</h2>
      <p class="font-semibold">{editorial.titulo}</p>
      <p class="text-sm text-gray-500">
        {editorial.autor} â€” {editorial.paginas}
      </p>
      <div class="card-actions mt-2">
        <a
          href={editorial.enlace}
          class="btn btn-outline btn-sm"
          target="_blank"
          rel="noopener noreferrer"
        >
          ðŸ“„ Ver PDF
        </a>
      </div>
    </div>
  </div>
</div>


<div class="max-w-4xl mx-auto p-4 space-y-8">
  <!-- Tarjeta ArtÃ­culos Originales -->
  <div class="bg-white shadow-md rounded-lg p-6">
    <h2 class="text-lg font-bold border-b pb-2 mb-4">ArtÃ­culos originales</h2>
    {articulosOriginales.map((art, index) => (
      <div key={index} class="mb-6">
        <h3 class="font-bold text-blue-700"><a href={art.article} target="_blank" rel="noopener noreferrer">{art.tipo} {art.titulo}</a></h3>
        <p class="text-gray-700">{Array.isArray(art.autor) ? art.autor.join(", ") : art.autor}</p>
        <div class="flex items-center justify-between mt-2">
          <a href={art.enlace} target="_blank" class="btn btn-outline btn-sm">
            ðŸ“„ Ver PDF
          </a>
          <span class="text-gray-500">{art.paginas}</span>
        </div>
      </div>
    ))}
  </div>

  <!-- Tarjeta ArtÃ­culos de RevisiÃ³n -->
  <div class="bg-white shadow-md rounded-lg p-6">
    <h2 class="text-lg font-bold border-b pb-2 mb-4">ArtÃ­culos de revisiÃ³n</h2>
    {articulosRevision.map((art, index) => (
      <div key={index} class="mb-6">
        <h3 class="font-bold text-blue-700"><a href={art.article} target="_blank" rel="noopener noreferrer">{art.tipo} {art.titulo}</a></h3>
        <p class="text-gray-700">{Array.isArray(art.autor) ? art.autor.join(", ") : art.autor}</p>
        <div class="flex items-center justify-between mt-2">
          <a href={art.enlace} target="_blank" class="btn btn-outline btn-sm">
            ðŸ“„ Ver PDF
          </a>
          <span class="text-gray-500">{art.paginas}</span>
        </div>
      </div>
    ))}
  </div>

  <!-- InformaciÃ³n adicional -->
  <div class="bg-white shadow-md rounded-lg p-6">
    <p>REMI es una revista de Acceso Abierto, semestral, gratuita, revisada por pares evaluadores, que acepta de forma continua manuscritos de carÃ¡cter multidisciplinario sin costo de publicaciÃ³n para los autores.</p>
    <img src="/remi/creativecommon.png" alt="DescripciÃ³n de la imagen" class="my-4"/>
    <p>Revista Multidisciplinaria de InvestigaciÃ³n por Facultad Multidisciplinaria de Occidente, Universidad de El Salvador se distribuye bajo una Licencia Creative Commons AtribuciÃ³n-NoComercial 4.0 Internacional.</p>
  </div>
</div>

